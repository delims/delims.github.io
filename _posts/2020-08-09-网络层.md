---
layout: post
author: delims
categories: 网络
---

> 将网络互连起来要使用一些中间设备，根据中间设备所在的层次划分：

1. 物理层时候用的中间是被叫**转发器**(repeater)，**集线器**是多网口的**转发器**。
2. 数据链路层使用的中间设备叫**网桥**或**桥接器**(bridge)，**交换机**是多网口的**网桥**。
3. 网络层使用的中间设备叫**路由器**(router)。
4. 在网络层以上使用的中间设备叫**网关**(geteway)。

- 当中间设备是转发器或网桥时，这仅仅是把一个网络扩大了，而从网络层的角度看，这仍然是一个网络。

> 现在主要使用**无分类编址**(CIDR)，IP地址分类早已成为历史，稍微了解一下

| 分类 | 前缀 | 网络号位数 | 主机号位数 |
| --- | --- | --- | --- |
| A类 | 0 | 8 | 24 |
| B类 | 10 | 16 | 16 |
| C类 | 110 | 24 | 8 |
| D类型 | 1110 |   |

其中D类地址主要用于**多播**。

我们知道一个网络号中有很多主机号。我们要给一个主机发数据，路由器只是查找网络号，找到目标网络号，然后交付目标主机。

这里我个人理解为 D 类地址的网络号是 32 位。主机号0位。所以每个D类地址都代表一组主机，所有用于多播。

# 地址解析协议 ARP 

- 每一台主机都有一个ARP高速缓存，里面记录了本局域网内IP地址和MAC地址的对应关系。ARP高速缓存有一个过期时间。比如 10~20 分钟。
- 给局域网内的主机发消息的时候就查找ARP缓存。找到了直接拿出MAC地址使用。如果找不到，就发送一个ARP请求分组。
- ARP请求分组的的目标 MAC地址 为 **ff:ff:ff:ff:ff:ff** ，在局域网内的每一台主机都能数到这个分组，他们看看自己的IP地址是不是和请求分组询问的IP地址一致。如果不一致就不理睬。如果一致就通过单播告诉源主机自己的mac地址。同时把对方的MAC地址也写入自己ARP缓存。源主机收到回应后也把对方MAC写入缓存。








